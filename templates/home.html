<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <title>Home</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>
    <style>
        .loader {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            width: 50px;
            height: 50px;
        }
    

    </style>
  <script>
    // Variable para mantener el estado del botón de envío
    var isSubmitButtonDisabled = false;

    // Ocultar los inputs de tipo file y mostrar el div con el spinner cuando se hace clic en el botón "Subir"
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("submitBtn").addEventListener("click", function () {
            if (!isSubmitButtonDisabled) {
                var inputFiles = document.querySelectorAll(".input-file");
                var loaderDiv = document.getElementById("loader");
                var divContainer = document.querySelector(".row.justify-content-md");

                inputFiles.forEach(function (inputFile) {
                    inputFile.classList.add("d-none");
                });

                loaderDiv.style.display = "inline-block";
                divContainer.classList.add("d-none");
                isSubmitButtonDisabled = true; // Desactivar el botón de envío
            }
        });
    });

    // Mostrar el spinner y deshabilitar el botón de envío cuando se envía el formulario
    window.addEventListener("load", function () {
        document.querySelector("form").addEventListener("submit", function () {
            var target = document.getElementById("loader");
            var spinner = new Spinner().spin(target);

            if (!isSubmitButtonDisabled) {
                document.getElementById("submitBtn").setAttribute("disabled", "true");
                target.style.display = "inline-block";
                isSubmitButtonDisabled = true; // Desactivar el botón de envío
            }
        });
    });
</script>
</head>
<body>
    <div class="d-flex flex-column min-vh-100">
   <header>
    <!-- <img src="../imagenes/logos.jpeg" width="400px" height="400px" alt=""> -->
    <img src="{{ url_for('static', filename='images/logos.jpeg') }}" alt="Imagen" width="150" height="80">


   </header>
   <nav  class="bg-body-tertiary">
  
    <ul class="nav nav-pills justify-content-center mb-3 "  id="pills-tab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" href="/">Home</a>
        </li>
                <li class="nav-item">
                    <a class="nav-link " href="/basedatos">Base de Datos</a>
                </li>
                <li class="nav-item">
                        <a class="nav-link " href="/asiento">Asientos</a>
                    </li>
                <li class="nav-item">
                        <a class="nav-link " href="/correos">Correos</a>
                </li>

   </nav>
    <div class="flex-grow-1  container text-center">
        <h1>Cuadre de Bancos</h1>
        <span class="error">
            {% if error_message %}
            <p>Error: {{ error_message }}</p>
        {% endif %}
        </span>
        
        <form method="POST" id="fom" action="/" enctype="multipart/form-data">
            
            
            
            <div class="row justify-content-md-center">
                <div class="col col-lg-6">
                    <div>
                        <div class=" box input-group mb-3">
                            <input type="file" class="form-control" name="file" id="mov" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" required>
                            <label class="input-group-text" for="mov">Movimientos</label>
                          </div>
                    </div>
                    

                    

                </div>
            </div>

            <div class="row align-items-start">
                <div class="col">
                    <div >
                        <div  class="box input-group mb-3">
                        
                            <input type="file" class="form-control" name="file" id="pro" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">
                            <label class="input-group-text" for="pro">Proveedores:</label>
                        </div>
                    </div>
                    
                </div>
                <div class="col">
                    <div>
                        <div  class="box input-group mb-3">
                        
                            <input type="file" class="form-control" name="file" id="int"  accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">
                            <label class="input-group-text" for="int">Interbancarias:</label>
                        </div>
                    </div>
                    
                </div>
                <div class="col">
                    <div>

                        <div  class="box input-group mb-3">
                            
                            <input type="file" class="form-control" name="file" id="tra" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" >
                            <label class="input-group-text" for="tra">Transferencias:</label>
                        </div>
                    </div>
                </div>
              </div>

              <div class="row">
                <div class="col">

                    <div class="d-grid gap-2 col-6 mx-auto">
                        <input   id="submitBtn" class="btn btn-primary" type="submit" value="Procesar">
                        
                      </div>

                  
                </div>
                
            </div>
    </form>

        
      </div>

      <div id="loader" class="loader"></div>
      

<footer>
    <div class="text-end">v 0.4.1</div>
    
</footer>
</div>
</body>
</html>