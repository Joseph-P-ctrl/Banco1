<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <title>Home</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>
    <style>
        .loader {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            width: 50px;
            height: 50px;
        }

        .corner-theme-btn {
            position: fixed;
            top: 16px;
            right: 214px;
            z-index: 10001;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            border: 1px solid #cfd8e3;
            background: #ffffff;
            color: #1f2937;
            font-size: 18px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(15, 23, 42, 0.08);
            cursor: pointer;
        }

        .corner-quick-btn {
            position: fixed;
            top: 16px;
            right: 160px;
            z-index: 10001;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            border: 1px solid #cfd8e3;
            background: #ffffff;
            color: #1f2937;
            font-size: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(15, 23, 42, 0.08);
            text-decoration: none;
        }

        .corner-logout-btn {
            position: fixed;
            top: 16px;
            right: 14px;
            z-index: 10001;
            border-radius: 20px;
            padding: 8px 14px;
            font-weight: 600;
        }

        .corner-theme-btn:hover,
        .corner-quick-btn:hover {
            background: #f8fafc;
        }

        body.theme-dark {
            background: #0f172a;
            color: #e2e8f0;
        }

        body.theme-dark nav,
        body.theme-dark .bg-body-tertiary {
            background: #111827 !important;
        }

        body.theme-dark .nav-link {
            color: #cbd5e1 !important;
        }

        body.theme-dark .nav-link.active {
            color: #93c5fd !important;
        }
    </style>
  <script>
    // Variable para mantener el estado del bot√≥n de env√≠o
    var isSubmitButtonDisabled = false;

    // Ocultar los inputs de tipo file y mostrar el div con el spinner cuando se hace clic en el bot√≥n "Subir"
    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("submitBtn").addEventListener("click", function () {
            if (!isSubmitButtonDisabled) {
                var inputFiles = document.querySelectorAll(".input-file");
                var loaderDiv = document.getElementById("loader");
                var divContainer = document.querySelector(".row.justify-content-md");

                inputFiles.forEach(function (inputFile) {
                    inputFile.classList.add("d-none");
                });

                loaderDiv.style.display = "inline-block";
                divContainer.classList.add("d-none");
                isSubmitButtonDisabled = true; // Desactivar el bot√≥n de env√≠o
            }
        });
    });

    // Mostrar el spinner y deshabilitar el bot√≥n de env√≠o cuando se env√≠a el formulario
    window.addEventListener("load", function () {
        document.querySelector("form").addEventListener("submit", function () {
            var target = document.getElementById("loader");
            var spinner = new Spinner().spin(target);

            if (!isSubmitButtonDisabled) {
                document.getElementById("submitBtn").setAttribute("disabled", "true");
                target.style.display = "inline-block";
                isSubmitButtonDisabled = true; // Desactivar el bot√≥n de env√≠o
            }
        });
    });
</script>
<script>
function applyThemeMode() {
    const mode = localStorage.getItem('ensaThemeMode') || 'light';
    document.body.classList.toggle('theme-dark', mode === 'dark');
}

function toggleColorMode() {
    const isDark = document.body.classList.contains('theme-dark');
    const next = isDark ? 'light' : 'dark';
    localStorage.setItem('ensaThemeMode', next);
    applyThemeMode();
}

document.addEventListener('DOMContentLoaded', applyThemeMode);
</script>
</head>
<body>
    <button type="button" class="corner-theme-btn" title="Modo claro/oscuro" aria-label="Modo claro/oscuro" onclick="toggleColorMode()">üåô</button>
    <a class="corner-quick-btn" href="/correos" title="Ajustes" aria-label="Ajustes">‚öô</a>
    <div class="d-flex flex-column min-vh-100">
   <header>
    <!-- <img src="../imagenes/logos.jpeg" width="400px" height="400px" alt=""> -->
    <img src="{{ url_for('static', filename='images/logos.jpeg') }}" alt="Imagen" width="150" height="80">


   </header>
   <nav  class="bg-body-tertiary">
  
    <ul class="nav nav-pills justify-content-center mb-3 "  id="pills-tab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" href="/">Home</a>
        </li>
                <li class="nav-item">
                    <a class="nav-link " href="/basedatos">Base de Datos</a>
                </li>
                <li class="nav-item">
                        <a class="nav-link " href="/asiento">Asientos</a>
                    </li>
                <li class="nav-item">
                        <a class="nav-link " href="/correos">Correos</a>
                </li>
   </nav>
    <div class="flex-grow-1  container text-center">
        <h1>Cuadre de Bancos</h1>
        <span class="error">
            {% if error_message %}
            <p>Error: {{ error_message }}</p>
        {% endif %}
        </span>
        
        <form method="POST" id="fom" action="/" enctype="multipart/form-data">
            
            
            
            <div class="row justify-content-md-center">
                <div class="col col-lg-6">
                    <div>
                        <div class=" box input-group mb-3">
                            <input type="file" class="form-control" name="file" id="mov" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" required>
                            <label class="input-group-text" for="mov">Movimientos</label>
                          </div>
                    </div>
                    

                    

                </div>
            </div>

            <div class="row align-items-start">
                <div class="col">
                    <div >
                        <div  class="box input-group mb-3">
                        
                            <input type="file" class="form-control" name="file" id="pro" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">
                            <label class="input-group-text" for="pro">Proveedores:</label>
                        </div>
                    </div>
                    
                </div>
                <div class="col">
                    <div>
                        <div  class="box input-group mb-3">
                        
                            <input type="file" class="form-control" name="file" id="int"  accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet">
                            <label class="input-group-text" for="int">Interbancarias:</label>
                        </div>
                    </div>
                    
                </div>
                <div class="col">
                    <div>

                        <div  class="box input-group mb-3">
                            
                            <input type="file" class="form-control" name="file" id="tra" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" >
                            <label class="input-group-text" for="tra">Transferencias:</label>
                        </div>
                    </div>
                </div>
              </div>

              <div class="row">
                <div class="col">

                    <div class="d-grid gap-2 col-6 mx-auto">
                        <input   id="submitBtn" class="btn btn-primary" type="submit" value="Procesar">
                        
                      </div>

                  
                </div>
                
            </div>
    </form>

        
      </div>

      <div id="loader" class="loader"></div>
      

<footer>
    <div class="text-end">v 0.4.1</div>
    
</footer>
</div>
</body>
</html>